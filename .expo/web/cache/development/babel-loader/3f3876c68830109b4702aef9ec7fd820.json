{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"get\", \"request\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nfunction usePermission(methods, options) {\n  var isMounted = useRef(true);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var _ref = options || {},\n      _ref$get = _ref.get,\n      get = _ref$get === void 0 ? true : _ref$get,\n      _ref$request = _ref.request,\n      request = _ref$request === void 0 ? false : _ref$request,\n      permissionOptions = _objectWithoutProperties(_ref, _excluded);\n\n  var getPermission = useCallback(function _callee() {\n    var response;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(methods.getMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined));\n\n          case 2:\n            response = _context.sent;\n            if (isMounted.current) setStatus(response);\n            return _context.abrupt(\"return\", response);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [methods.getMethod]);\n  var requestPermission = useCallback(function _callee2() {\n    var response;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(methods.requestMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined));\n\n          case 2:\n            response = _context2.sent;\n            if (isMounted.current) setStatus(response);\n            return _context2.abrupt(\"return\", response);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [methods.requestMethod]);\n  useEffect(function runMethods() {\n    if (request) requestPermission();\n    if (!request && get) getPermission();\n  }, [get, request, requestPermission, getPermission]);\n  useEffect(function didMount() {\n    isMounted.current = true;\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return [status, requestPermission, getPermission];\n}\n\nexport function createPermissionHook(methods) {\n  return function (options) {\n    return usePermission(methods, options);\n  };\n}","map":{"version":3,"mappings":";;;;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,MAAjC,EAAyCC,QAAzC,QAAyD,OAAzD;;AAMA,SAASC,aAAT,CAAuBC,OAAvB,EAAgCC,OAAhC,EAAyC;AACrC,MAAMC,SAAS,GAAGL,MAAM,CAAC,IAAD,CAAxB;;AACA,kBAA4BC,QAAQ,CAAC,IAAD,CAApC;AAAA;AAAA,MAAOK,MAAP;AAAA,MAAeC,SAAf;;AACA,aAA8DH,OAAO,IAAI,EAAzE;AAAA,sBAAQI,GAAR;AAAA,MAAQA,GAAR,yBAAc,IAAd;AAAA,0BAAoBC,OAApB;AAAA,MAAoBA,OAApB,6BAA8B,KAA9B;AAAA,MAAwCC,iBAAxC;;AACA,MAAMC,aAAa,GAAGb,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACPK,OAAO,CAACS,SAAR,CAAkBC,MAAM,CAACC,IAAP,CAAYJ,iBAAZ,EAA+BK,MAA/B,GAAwC,CAAxC,GAA4CL,iBAA5C,GAAgEM,SAAlF,CADO;;AAAA;AACxBC,oBADwB;AAE9B,gBAAIZ,SAAS,CAACa,OAAd,EACIX,SAAS,CAACU,QAAD,CAAT;AAH0B,6CAIvBA,QAJuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD,EAK9B,CAACd,OAAO,CAACS,SAAT,CAL8B,CAAjC;AAMA,MAAMO,iBAAiB,GAAGrB,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACXK,OAAO,CAACiB,aAAR,CAAsBP,MAAM,CAACC,IAAP,CAAYJ,iBAAZ,EAA+BK,MAA/B,GAAwC,CAAxC,GAA4CL,iBAA5C,GAAgEM,SAAtF,CADW;;AAAA;AAC5BC,oBAD4B;AAElC,gBAAIZ,SAAS,CAACa,OAAd,EACIX,SAAS,CAACU,QAAD,CAAT;AAH8B,8CAI3BA,QAJ2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD,EAKlC,CAACd,OAAO,CAACiB,aAAT,CALkC,CAArC;AAMArB,WAAS,CAAC,SAASsB,UAAT,GAAsB;AAC5B,QAAIZ,OAAJ,EACIU,iBAAiB;AACrB,QAAI,CAACV,OAAD,IAAYD,GAAhB,EACIG,aAAa;AACpB,GALQ,EAKN,CAACH,GAAD,EAAMC,OAAN,EAAeU,iBAAf,EAAkCR,aAAlC,CALM,CAAT;AAOAZ,WAAS,CAAC,SAASuB,QAAT,GAAoB;AAC1BjB,aAAS,CAACa,OAAV,GAAoB,IAApB;AACA,WAAO,YAAM;AACTb,eAAS,CAACa,OAAV,GAAoB,KAApB;AACH,KAFD;AAGH,GALQ,EAKN,EALM,CAAT;AAMA,SAAO,CAACZ,MAAD,EAASa,iBAAT,EAA4BR,aAA5B,CAAP;AACH;;AAKD,OAAO,SAASY,oBAAT,CAA8BpB,OAA9B,EAAuC;AAC1C,SAAO,UAACC,OAAD;AAAA,WAAaF,aAAa,CAACC,OAAD,EAAUC,OAAV,CAA1B;AAAA,GAAP;AACH","names":["useCallback","useEffect","useRef","useState","usePermission","methods","options","isMounted","status","setStatus","get","request","permissionOptions","getPermission","getMethod","Object","keys","length","undefined","response","current","requestPermission","requestMethod","runMethods","didMount","createPermissionHook"],"sourceRoot":"","sources":["C:/Users/georg/Documents/Coursework/SpaceBook/node_modules/expo-modules-core/build/PermissionsHook.js"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\n/**\n * Get or request permission for protected functionality within the app.\n * It uses separate permission requesters to interact with a single permission.\n * By default, the hook will only retrieve the permission status.\n */\nfunction usePermission(methods, options) {\n    const isMounted = useRef(true);\n    const [status, setStatus] = useState(null);\n    const { get = true, request = false, ...permissionOptions } = options || {};\n    const getPermission = useCallback(async () => {\n        const response = await methods.getMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n        if (isMounted.current)\n            setStatus(response);\n        return response;\n    }, [methods.getMethod]);\n    const requestPermission = useCallback(async () => {\n        const response = await methods.requestMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n        if (isMounted.current)\n            setStatus(response);\n        return response;\n    }, [methods.requestMethod]);\n    useEffect(function runMethods() {\n        if (request)\n            requestPermission();\n        if (!request && get)\n            getPermission();\n    }, [get, request, requestPermission, getPermission]);\n    // Workaround for unmounting components receiving state updates\n    useEffect(function didMount() {\n        isMounted.current = true;\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    return [status, requestPermission, getPermission];\n}\n/**\n * Create a new permission hook with the permission methods built-in.\n * This can be used to quickly create specific permission hooks in every module.\n */\nexport function createPermissionHook(methods) {\n    return (options) => usePermission(methods, options);\n}\n//# sourceMappingURL=PermissionsHook.js.map"]},"metadata":{},"sourceType":"module"}