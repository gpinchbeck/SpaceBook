{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { UnavailabilityError } from 'expo-modules-core';\nimport { CameraType, PermissionStatus } from \"./Camera.types\";\nimport { canGetUserMedia, isBackCameraAvailableAsync, isFrontCameraAvailableAsync } from \"./WebUserMediaManager\";\n\nfunction getUserMedia(constraints) {\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    return navigator.mediaDevices.getUserMedia(constraints);\n  }\n\n  var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || function () {\n    var error = new Error('Permission unimplemented');\n    error.code = 0;\n    error.name = 'NotAllowedError';\n    throw error;\n  };\n\n  return new Promise(function (resolve, reject) {\n    getUserMedia.call(navigator, constraints, resolve, reject);\n  });\n}\n\nfunction handleGetUserMediaError(_ref) {\n  var message = _ref.message;\n\n  if (message === 'Permission dismissed') {\n    return {\n      status: PermissionStatus.UNDETERMINED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: false\n    };\n  } else {\n    return {\n      status: PermissionStatus.DENIED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: false\n    };\n  }\n}\n\nfunction handleRequestPermissionsAsync() {\n  var message;\n  return _regeneratorRuntime.async(function handleRequestPermissionsAsync$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(getUserMedia({\n            video: true\n          }));\n\n        case 3:\n          return _context.abrupt(\"return\", {\n            status: PermissionStatus.GRANTED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: true\n          });\n\n        case 6:\n          _context.prev = 6;\n          _context.t0 = _context[\"catch\"](0);\n          message = _context.t0.message;\n          return _context.abrupt(\"return\", handleGetUserMediaError({\n            message: message\n          }));\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 6]], Promise);\n}\n\nfunction handlePermissionsQueryAsync(query) {\n  var _navigator, _navigator$permission;\n\n  var _await$navigator$perm, state;\n\n  return _regeneratorRuntime.async(function handlePermissionsQueryAsync$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if ((_navigator = navigator) != null && (_navigator$permission = _navigator.permissions) != null && _navigator$permission.query) {\n            _context2.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('expo-camera', 'navigator.permissions API is not available');\n\n        case 2:\n          _context2.next = 4;\n          return _regeneratorRuntime.awrap(navigator.permissions.query({\n            name: query\n          }));\n\n        case 4:\n          _await$navigator$perm = _context2.sent;\n          state = _await$navigator$perm.state;\n          _context2.t0 = state;\n          _context2.next = _context2.t0 === 'prompt' ? 9 : _context2.t0 === 'granted' ? 10 : _context2.t0 === 'denied' ? 11 : 12;\n          break;\n\n        case 9:\n          return _context2.abrupt(\"return\", {\n            status: PermissionStatus.UNDETERMINED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: false\n          });\n\n        case 10:\n          return _context2.abrupt(\"return\", {\n            status: PermissionStatus.GRANTED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: true\n          });\n\n        case 11:\n          return _context2.abrupt(\"return\", {\n            status: PermissionStatus.DENIED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: false\n          });\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nexport default {\n  get name() {\n    return 'ExponentCameraManager';\n  },\n\n  get Type() {\n    return {\n      back: 'back',\n      front: 'front'\n    };\n  },\n\n  get FlashMode() {\n    return {\n      on: 'on',\n      off: 'off',\n      auto: 'auto',\n      torch: 'torch'\n    };\n  },\n\n  get AutoFocus() {\n    return {\n      on: 'on',\n      off: 'off',\n      auto: 'auto',\n      singleShot: 'singleShot'\n    };\n  },\n\n  get WhiteBalance() {\n    return {\n      auto: 'auto',\n      continuous: 'continuous',\n      manual: 'manual'\n    };\n  },\n\n  get VideoQuality() {\n    return {};\n  },\n\n  get VideoStabilization() {\n    return {};\n  },\n\n  isAvailableAsync: function isAvailableAsync() {\n    return function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", canGetUserMedia());\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  takePicture: function takePicture(options, camera) {\n    return function _callee2() {\n      return _regeneratorRuntime.async(function _callee2$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(camera.takePicture(options));\n\n            case 2:\n              return _context4.abrupt(\"return\", _context4.sent);\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  pausePreview: function pausePreview(camera) {\n    return function _callee3() {\n      return _regeneratorRuntime.async(function _callee3$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regeneratorRuntime.awrap(camera.pausePreview());\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  resumePreview: function resumePreview(camera) {\n    return function _callee4() {\n      return _regeneratorRuntime.async(function _callee4$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return _regeneratorRuntime.awrap(camera.resumePreview());\n\n            case 2:\n              return _context6.abrupt(\"return\", _context6.sent);\n\n            case 3:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  getAvailableCameraTypesAsync: function getAvailableCameraTypesAsync() {\n    return function _callee5() {\n      var devices, types;\n      return _regeneratorRuntime.async(function _callee5$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              if (!(!canGetUserMedia() || !navigator.mediaDevices.enumerateDevices)) {\n                _context7.next = 2;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", []);\n\n            case 2:\n              _context7.next = 4;\n              return _regeneratorRuntime.awrap(navigator.mediaDevices.enumerateDevices());\n\n            case 4:\n              devices = _context7.sent;\n              _context7.t0 = _regeneratorRuntime;\n              _context7.t1 = Promise;\n              _context7.next = 9;\n              return _regeneratorRuntime.awrap(isFrontCameraAvailableAsync(devices));\n\n            case 9:\n              _context7.t2 = _context7.sent;\n\n              if (!_context7.t2) {\n                _context7.next = 12;\n                break;\n              }\n\n              _context7.t2 = CameraType.front;\n\n            case 12:\n              _context7.t3 = _context7.t2;\n              _context7.next = 15;\n              return _regeneratorRuntime.awrap(isBackCameraAvailableAsync());\n\n            case 15:\n              _context7.t4 = _context7.sent;\n\n              if (!_context7.t4) {\n                _context7.next = 18;\n                break;\n              }\n\n              _context7.t4 = CameraType.back;\n\n            case 18:\n              _context7.t5 = _context7.t4;\n              _context7.t6 = [_context7.t3, _context7.t5];\n              _context7.t7 = _context7.t1.all.call(_context7.t1, _context7.t6);\n              _context7.next = 23;\n              return _context7.t0.awrap.call(_context7.t0, _context7.t7);\n\n            case 23:\n              types = _context7.sent;\n              return _context7.abrupt(\"return\", types.filter(Boolean));\n\n            case 25:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  getAvailablePictureSizes: function getAvailablePictureSizes(ratio, camera) {\n    return function _callee6() {\n      return _regeneratorRuntime.async(function _callee6$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return _regeneratorRuntime.awrap(camera.getAvailablePictureSizes(ratio));\n\n            case 2:\n              return _context8.abrupt(\"return\", _context8.sent);\n\n            case 3:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  getPermissionsAsync: function getPermissionsAsync() {\n    return function _callee7() {\n      return _regeneratorRuntime.async(function _callee7$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              return _context9.abrupt(\"return\", handlePermissionsQueryAsync('camera'));\n\n            case 1:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  requestPermissionsAsync: function requestPermissionsAsync() {\n    return function _callee8() {\n      return _regeneratorRuntime.async(function _callee8$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              return _context10.abrupt(\"return\", handleRequestPermissionsAsync());\n\n            case 1:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  getCameraPermissionsAsync: function getCameraPermissionsAsync() {\n    return function _callee9() {\n      return _regeneratorRuntime.async(function _callee9$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              return _context11.abrupt(\"return\", handlePermissionsQueryAsync('camera'));\n\n            case 1:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  requestCameraPermissionsAsync: function requestCameraPermissionsAsync() {\n    return function _callee10() {\n      return _regeneratorRuntime.async(function _callee10$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              return _context12.abrupt(\"return\", handleRequestPermissionsAsync());\n\n            case 1:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  getMicrophonePermissionsAsync: function getMicrophonePermissionsAsync() {\n    return function _callee11() {\n      return _regeneratorRuntime.async(function _callee11$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              return _context13.abrupt(\"return\", handlePermissionsQueryAsync('microphone'));\n\n            case 1:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  requestMicrophonePermissionsAsync: function requestMicrophonePermissionsAsync() {\n    return function _callee12() {\n      var message;\n      return _regeneratorRuntime.async(function _callee12$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.prev = 0;\n              _context14.next = 3;\n              return _regeneratorRuntime.awrap(getUserMedia({\n                audio: true\n              }));\n\n            case 3:\n              return _context14.abrupt(\"return\", {\n                status: PermissionStatus.GRANTED,\n                expires: 'never',\n                canAskAgain: true,\n                granted: true\n              });\n\n            case 6:\n              _context14.prev = 6;\n              _context14.t0 = _context14[\"catch\"](0);\n              message = _context14.t0.message;\n              return _context14.abrupt(\"return\", handleGetUserMediaError({\n                message: message\n              }));\n\n            case 10:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, null, null, [[0, 6]], Promise);\n    }();\n  }\n};","map":{"version":3,"mappings":"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","names":["UnavailabilityError","CameraType","PermissionStatus","canGetUserMedia","isBackCameraAvailableAsync","isFrontCameraAvailableAsync","getUserMedia","constraints","navigator","mediaDevices","webkitGetUserMedia","mozGetUserMedia","error","Error","code","name","Promise","resolve","reject","call","handleGetUserMediaError","message","status","UNDETERMINED","expires","canAskAgain","granted","DENIED","handleRequestPermissionsAsync","video","GRANTED","handlePermissionsQueryAsync","query","permissions","state","Type","back","front","FlashMode","on","off","auto","torch","AutoFocus","singleShot","WhiteBalance","continuous","manual","VideoQuality","VideoStabilization","isAvailableAsync","takePicture","options","camera","pausePreview","resumePreview","getAvailableCameraTypesAsync","enumerateDevices","devices","all","types","filter","Boolean","getAvailablePictureSizes","ratio","getPermissionsAsync","requestPermissionsAsync","getCameraPermissionsAsync","requestCameraPermissionsAsync","getMicrophonePermissionsAsync","requestMicrophonePermissionsAsync","audio"],"sourceRoot":"","sources":["C:/Users/georg/Documents/Coursework/SpaceBook/node_modules/expo-camera/build/ExponentCameraManager.web.js"],"sourcesContent":["import { UnavailabilityError } from 'expo-modules-core';\nimport { CameraType, PermissionStatus, } from './Camera.types';\nimport { canGetUserMedia, isBackCameraAvailableAsync, isFrontCameraAvailableAsync, } from './WebUserMediaManager';\nfunction getUserMedia(constraints) {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n        return navigator.mediaDevices.getUserMedia(constraints);\n    }\n    // Some browsers partially implement mediaDevices. We can't just assign an object\n    // with getUserMedia as it would overwrite existing properties.\n    // Here, we will just add the getUserMedia property if it's missing.\n    // First get ahold of the legacy getUserMedia, if present\n    const getUserMedia = \n    // TODO: this method is deprecated, migrate to https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    navigator.getUserMedia ||\n        navigator.webkitGetUserMedia ||\n        navigator.mozGetUserMedia ||\n        function () {\n            const error = new Error('Permission unimplemented');\n            error.code = 0;\n            error.name = 'NotAllowedError';\n            throw error;\n        };\n    return new Promise((resolve, reject) => {\n        getUserMedia.call(navigator, constraints, resolve, reject);\n    });\n}\nfunction handleGetUserMediaError({ message }) {\n    // name: NotAllowedError\n    // code: 0\n    if (message === 'Permission dismissed') {\n        return {\n            status: PermissionStatus.UNDETERMINED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: false,\n        };\n    }\n    else {\n        // TODO: Bacon: [OSX] The system could deny access to chrome.\n        // TODO: Bacon: add: { status: 'unimplemented' }\n        return {\n            status: PermissionStatus.DENIED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: false,\n        };\n    }\n}\nasync function handleRequestPermissionsAsync() {\n    try {\n        await getUserMedia({\n            video: true,\n        });\n        return {\n            status: PermissionStatus.GRANTED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: true,\n        };\n    }\n    catch ({ message }) {\n        return handleGetUserMediaError({ message });\n    }\n}\nasync function handlePermissionsQueryAsync(query) {\n    if (!navigator?.permissions?.query) {\n        throw new UnavailabilityError('expo-camera', 'navigator.permissions API is not available');\n    }\n    const { state } = await navigator.permissions.query({ name: query });\n    switch (state) {\n        case 'prompt':\n            return {\n                status: PermissionStatus.UNDETERMINED,\n                expires: 'never',\n                canAskAgain: true,\n                granted: false,\n            };\n        case 'granted':\n            return {\n                status: PermissionStatus.GRANTED,\n                expires: 'never',\n                canAskAgain: true,\n                granted: true,\n            };\n        case 'denied':\n            return {\n                status: PermissionStatus.DENIED,\n                expires: 'never',\n                canAskAgain: true,\n                granted: false,\n            };\n    }\n}\nexport default {\n    get name() {\n        return 'ExponentCameraManager';\n    },\n    get Type() {\n        return {\n            back: 'back',\n            front: 'front',\n        };\n    },\n    get FlashMode() {\n        return {\n            on: 'on',\n            off: 'off',\n            auto: 'auto',\n            torch: 'torch',\n        };\n    },\n    get AutoFocus() {\n        return {\n            on: 'on',\n            off: 'off',\n            auto: 'auto',\n            singleShot: 'singleShot',\n        };\n    },\n    get WhiteBalance() {\n        return {\n            auto: 'auto',\n            continuous: 'continuous',\n            manual: 'manual',\n        };\n    },\n    get VideoQuality() {\n        return {};\n    },\n    get VideoStabilization() {\n        return {};\n    },\n    async isAvailableAsync() {\n        return canGetUserMedia();\n    },\n    async takePicture(options, camera) {\n        return await camera.takePicture(options);\n    },\n    async pausePreview(camera) {\n        await camera.pausePreview();\n    },\n    async resumePreview(camera) {\n        return await camera.resumePreview();\n    },\n    async getAvailableCameraTypesAsync() {\n        if (!canGetUserMedia() || !navigator.mediaDevices.enumerateDevices)\n            return [];\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        const types = await Promise.all([\n            (await isFrontCameraAvailableAsync(devices)) && CameraType.front,\n            (await isBackCameraAvailableAsync()) && CameraType.back,\n        ]);\n        return types.filter(Boolean);\n    },\n    async getAvailablePictureSizes(ratio, camera) {\n        return await camera.getAvailablePictureSizes(ratio);\n    },\n    /* async getSupportedRatios(camera: ExponentCameraRef): Promise<string[]> {\n      // TODO: Support on web\n    },\n    async record(\n      options?: CameraRecordingOptions,\n      camera: ExponentCameraRef\n    ): Promise<{ uri: string }> {\n      // TODO: Support on web\n    },\n    async stopRecording(camera: ExponentCameraRef): Promise<void> {\n      // TODO: Support on web\n    }, */\n    async getPermissionsAsync() {\n        return handlePermissionsQueryAsync('camera');\n    },\n    async requestPermissionsAsync() {\n        return handleRequestPermissionsAsync();\n    },\n    async getCameraPermissionsAsync() {\n        return handlePermissionsQueryAsync('camera');\n    },\n    async requestCameraPermissionsAsync() {\n        return handleRequestPermissionsAsync();\n    },\n    async getMicrophonePermissionsAsync() {\n        return handlePermissionsQueryAsync('microphone');\n    },\n    async requestMicrophonePermissionsAsync() {\n        try {\n            await getUserMedia({\n                audio: true,\n            });\n            return {\n                status: PermissionStatus.GRANTED,\n                expires: 'never',\n                canAskAgain: true,\n                granted: true,\n            };\n        }\n        catch ({ message }) {\n            return handleGetUserMediaError({ message });\n        }\n    },\n};\n//# sourceMappingURL=ExponentCameraManager.web.js.map"]},"metadata":{},"sourceType":"module"}